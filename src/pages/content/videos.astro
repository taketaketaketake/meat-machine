---
// src/pages/videos.astro
import Layout from '../components/astro/layout.astro';
import '../styles/global.css';

// --- Data ---
const featuredVideos = [
  { id: 1, title: "Behind the Scenes at Green Leaf Dispensary", business: "Green Leaf Dispensary", duration: "4:32", date: "2025-06-20", category: "cannabis"},
  { id: 2, title: "Detroit's Best Pizza - Full Review", business: "Midtown Pizza", duration: "2:15", date: "2025-06-18", category: "food"},
  { id: 3, title: "Monthly Detroit Events Guide", business: "Detroit Events Bureau", duration: "6:18", date: "2025-05-01", category: "events"}
];

const recentVideos = Array(12).fill(null).map((_, i) => ({
  id: i + 4,
  title: [`Cannabis Strain Review: Blue Dream`, `How to Roll the Perfect Joint`, `Top 5 Detroit Coffee Shops`, `Food Truck Festival Highlights`, `Downtown Detroit Dispensary Tour`, `Cooking with Cannabis: Basics`, `Local Artist Spotlight`, `Morning Routine at Coffee House Detroit`, `Product Unboxing: New Vape Pen`, `Late Night Food Options in Detroit`, `DIY Cannabis Tinctures`, `Weekend Events Roundup`][i],
  business: [`Detroit Dabs`, `Detroit Dabs`, `Motor City Muncher`, `Motor City Muncher`, `Detroit Dabs`, `The Canna-seur`, `Explore Detroit`, `Motor City Muncher`, `The Canna-seur`, `Motor City Muncher`, `The Canna-seur`, `Explore Detroit`][i],
  duration: [`3:45`, `1:20`, `4:10`, `2:35`, `5:15`, `8:20`, `2:45`, `0:58`, `6:32`, `1:45`, `7:15`, `3:20`][i],
  date: new Date(2025, 5, 24 - i * 2).toISOString().split('T')[0],
  category: [`cannabis`, `cannabis`, `food`, `food`, `cannabis`, `cannabis`, `local`, `food`, `cannabis`, `food`, `cannabis`, `events`][i]
}));

const creators = [
  {
    id: 1,
    name: 'Motor City Muncher',
    handle: '@mcmuncher',
    avatarEmoji: 'ðŸ•',
    bannerGradient: 'from-orange-500/20 to-red-500/20',
    specialty: 'Food Reviews',
    specialtyColor: 'bg-red-500/20 text-red-300',
    bio: "Your go-to guide for Detroit's food scene. From greasy spoons to gourmet dining, I'm eating my way through the city one bite at a time.",
    subscriberCount: 18400,
    videoCount: 112,
    latestVideos: recentVideos.filter(v => v.business === 'Motor City Muncher').slice(0, 2)
  },
  {
    id: 2,
    name: 'Detroit Dabs',
    handle: '@detroitdabs',
    avatarEmoji: 'ðŸŒ¿',
    bannerGradient: 'from-emerald-500/20 to-green-500/20',
    specialty: 'Cannabis Education',
    specialtyColor: 'bg-green-500/20 text-green-300',
    bio: "Exploring the world of cannabis with a focus on education, strain reviews, and responsible consumption. Learn and vibe with me.",
    subscriberCount: 26200,
    videoCount: 238,
    latestVideos: recentVideos.filter(v => v.business === 'Detroit Dabs').slice(0, 2)
  },
  {
    id: 3,
    name: 'Explore Detroit',
    handle: '@exploredetroit',
    avatarEmoji: 'ðŸ™ï¸',
    bannerGradient: 'from-sky-500/20 to-indigo-500/20',
    specialty: 'City Vlogging',
    specialtyColor: 'bg-sky-500/20 text-sky-300',
    bio: "Showcasing the art, culture, and hidden gems of Detroit. Follow along for event coverage and local business spotlights.",
    subscriberCount: 9800,
    videoCount: 76,
    latestVideos: recentVideos.filter(v => v.business === 'Explore Detroit').slice(0, 2)
  }
];

const categories = [ { id: "all", label: "All Videos" }, { id: "cannabis", label: "Cannabis" }, { id: "food", label: "Food & Drink" }, { id: "local", label: "Local Businesses" }, { id: "events", label: "Events" }];
const styles = [ { id: "all-styles", label: "All Styles" }, { id: "reviews", label: "Reviews" }, { id: "behind-scenes", label: "Behind the Scenes" }, { id: "tutorials", label: "Tutorials" }, { id: "short-form", label: "Short-form" }];
const sortOptions = [ { id: "recent", label: "Most Recent" }, { id: "popular", label: "Most Popular" }, { id: "staff-picks", label: "Staff Picks" }];

const today = new Date('2025-06-24T11:16:00'); 

function isNew(videoDateStr: string) {
  const videoDate = new Date(videoDateStr);
  const diffTime = today.getTime() - videoDate.getTime();
  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
  return diffDays <= 10 && diffDays >= 0;
}

const gradients = [ 'from-pink-500/20 to-purple-500/20', 'from-emerald-500/20 to-teal-500/20', 'from-sky-500/20 to-indigo-500/20'];
---

<Layout title="Videos - CannaCircular | Detroit's Premier Cannabis & Food Guide" class="bg-gray-950">
  <section class="relative from-gray-950 via-purple-900/20 to-gray-950 pt-16 pb-20 overflow-hidden bg-gradient-to-b">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center">
      <h1 class="text-4xl md:text-6xl font-black text-white tracking-tight mb-4">
        Detroit Video <span class="text-gradient-pink">Showcase</span>
      </h1>
      <p class="text-lg text-gray-300 max-w-3xl mx-auto mb-8">
        Discover the best food, cannabis, and local businesses through authentic video content.
      </p>
      <div class="max-w-2xl mx-auto">
        <div class="relative">
          <input type="text" placeholder="Search videos, businesses, or categories..." class="w-full px-5 py-4 pr-12 bg-gray-900/50 backdrop-blur-md border border-gray-700 rounded-full text-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-500"/>
          <button class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
          </button>
        </div>
      </div>
    </div>
  </section>
  
  <section class="bg-gray-900/70 backdrop-blur-md border-y border-gray-800 sticky top-0 z-30">
    <div class="max-w-7xl mx-auto">
      <div class="flex overflow-x-auto scrollbar-hide">
        {categories.map((category) => (
          <button class={`flex-shrink-0 px-6 py-4 text-sm font-medium border-b-2 transition-colors duration-200 ${category.id === 'all' ? 'border-pink-500 text-pink-500' : 'border-transparent text-gray-400 hover:text-white hover:border-gray-500'}`}>
            {category.label}
          </button>
        ))}
        <a href="/video-layouts" class="flex-shrink-0 px-6 py-4 text-sm font-medium border-b-2 border-transparent text-gray-400 hover:text-white hover:border-gray-500 ml-auto">
          Layouts
        </a>
      </div>
    </div>
  </section>
  
  <main class="py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-16">

            <section>
        <div class="border-l-4 border-emerald-500 pl-6 mb-8">
            <h2 class="text-3xl font-bold text-white">All Videos</h2>
            <p class="text-gray-400">Browse the full collection of content from around the city.</p>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-8">
          {recentVideos.map((video, i) => (
            <a href="#" class="group">
              <div class="relative rounded-xl shadow-sm overflow-hidden border border-gray-800/50 group-hover:border-gray-700 transition">
                <div class={`aspect-[16/9] bg-gradient-to-br ${gradients[i % gradients.length]} flex items-center justify-center`}><div class="text-3xl">ðŸŽ¥</div></div>
                <div class="absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                  <div class="w-12 h-12 flex items-center justify-center rounded-full bg-white/20 backdrop-blur-sm border border-white/30"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white ml-1" viewBox="0 0 20 20" fill="currentColor"><path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" /></svg></div>
                </div>
                <div class="absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded-md">{video.duration}</div>
                {isNew(video.date) && (<div class="absolute top-2 left-2 bg-gradient-to-r from-pink-500 to-purple-600 text-white text-xs font-bold px-2 py-1 rounded-md animate-pulse">NEW</div>)}
              </div>
              <div class="pt-3">
                <p class="font-semibold text-white line-clamp-2">{video.title}</p>
                <p class="text-sm text-gray-400">{video.business}</p>
              </div>
            </a>
          ))}
        </div>
        <div class="mt-12 text-center">
          <button class="inline-flex items-center justify-center rounded-full text-sm font-medium h-11 px-8 border border-gray-600 text-gray-300 hover:bg-gray-800 transition-colors">
            Load More Videos
          </button>
        </div>
      </section>

      <section>
        <div class="border-l-4 border-pink-500 pl-6 mb-8">
            <h2 class="text-3xl font-bold text-white">Featured Videos</h2>
            <p class="text-gray-400">Hand-picked selections from across the city.</p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          {featuredVideos.map((video, i) => (
            <a href="#" class="bg-gray-900/50 rounded-xl shadow-lg overflow-hidden hover:shadow-pink-500/20 hover:-translate-y-1 border border-gray-800 hover:border-pink-500/50 transition-all duration-300 group">
              <div class={`relative overflow-hidden aspect-[16/9] bg-gradient-to-br ${gradients[i % gradients.length]} flex items-center justify-center`}>
                <div class="text-center text-white p-4"><div class="text-4xl mb-2">ðŸŽ¬</div><h4 class="font-bold">{video.title}</h4></div>
                <div class="absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                  <div class="w-16 h-16 flex items-center justify-center rounded-full bg-white/20 backdrop-blur-sm border border-white/30"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white ml-1" viewBox="0 0 20 20" fill="currentColor"><path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" /></svg></div>
                </div>
                <div class="absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded-md">{video.duration}</div>
                {isNew(video.date) && (<div class="absolute top-2 left-2 bg-gradient-to-r from-pink-500 to-purple-600 text-white text-xs font-bold px-2 py-1 rounded-md animate-pulse">NEW</div>)}
              </div>
              <div class="p-4">
                <span class="text-xs font-semibold uppercase tracking-wider text-pink-400">{video.category}</span>
                <h3 class="font-bold text-white mt-1 mb-2 line-clamp-2">{video.title}</h3>
                <div class="flex items-center justify-between text-xs text-gray-400 pt-2 border-t border-gray-800"><p>{video.business}</p><span>{new Date(video.date).toLocaleDateString('en-US', {month: 'short', day: 'numeric'})}</span></div>
              </div>
            </a>
          ))}
        </div>
      </section>
      
      <section>
        <div class="border-l-4 border-purple-500 pl-6 mb-8">
            <h2 class="text-3xl font-bold text-white">Featured Creators</h2>
            <p class="text-gray-400">Meet the voices and visionaries behind the content.</p>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          {creators.map((creator) => (
            <div class="bg-gray-900/50 rounded-xl shadow-lg border border-gray-800 flex flex-col">
              <div class={`h-24 rounded-t-xl bg-gradient-to-br ${creator.bannerGradient}`}></div>
              <div class="flex-grow p-6 pt-0">
                <div class="flex justify-center -mt-12">
                  <div class="w-24 h-24 rounded-full bg-gray-800 border-4 border-gray-900 flex items-center justify-center text-4xl shadow-lg">{creator.avatarEmoji}</div>
                </div>
                <div class="text-center mt-4">
                  <h3 class="text-xl font-bold text-white">{creator.name}</h3>
                  <p class="text-pink-400 text-sm">{creator.handle}</p>
                  <span class={`mt-3 inline-block text-xs font-medium px-3 py-1 rounded-full ${creator.specialtyColor}`}>{creator.specialty}</span>
                </div>
                <p class="text-gray-400 text-sm text-center my-4">{creator.bio}</p>
                <div class="flex justify-around text-center text-sm border-y border-gray-800 py-3">
                  <div><div class="font-bold text-white">{(creator.subscriberCount / 1000).toFixed(1)}K</div><div class="text-gray-400 text-xs">Subscribers</div></div>
                  <div><div class="font-bold text-white">{creator.videoCount}</div><div class="text-gray-400 text-xs">Videos</div></div>
                </div>
                 <div class="mt-4">
                    <h5 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 text-center">Latest Videos</h5>
                    <div class="space-y-3">
                        {creator.latestVideos.map(video => (
                            <a href="#" class="flex items-center gap-3 bg-gray-800/50 p-2 rounded-lg hover:bg-gray-700/50 transition-colors">
                                <div class="w-16 h-10 bg-gradient-to-tr from-gray-500/10 to-gray-400/10 rounded flex-shrink-0 flex items-center justify-center text-xl">ðŸ“¹</div>
                                <div><p class="text-xs font-semibold text-white line-clamp-2 leading-tight">{video.title}</p></div>
                            </a>
                        ))}
                    </div>
                </div>
              </div>
              <div class="p-4 mt-auto">
                 <button class="w-full inline-flex items-center justify-center rounded-md text-sm font-medium h-10 px-4 py-2 bg-pink-600 text-white shadow hover:bg-pink-500 transition-colors">View Channel</button>
              </div>
            </div>
          ))}
        </div>
      </section>
    </div>
  </main>
</Layout>

<style>
  .text-gradient-pink { background-image: linear-gradient(to right, #ec4899, #a855f7); -webkit-background-clip: text; background-clip: text; color: transparent; }
  .scrollbar-hide::-webkit-scrollbar { display: none; }
  .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
  .line-clamp-1 { overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 1; }
  .line-clamp-2 { overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 2; }
</style>