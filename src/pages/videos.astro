---
// src/pages/videos.astro
import Layout from '@/components/astro/layout.astro';
import '@/styles/global.css';


// --- COMBINED DATA FOR ALL SECTIONS ---

const creators = [
  { id: 1, name: 'Motor City Muncher', handle: '@mcmuncher', avatarEmoji: 'üçï', bannerGradient: 'from-orange-500/20 to-red-500/20', specialty: 'Food Reviews', specialtyColor: 'bg-red-500/20 text-red-300', bio: "Your go-to guide for Detroit's food scene. From greasy spoons to gourmet dining, I'm eating my way through the city one bite at a time.", subscriberCount: 18400, videoCount: 112, },
  { id: 2, name: 'Detroit Dabs', handle: '@detroitdabs', avatarEmoji: 'üåø', bannerGradient: 'from-emerald-500/20 to-green-500/20', specialty: 'Cannabis Education', specialtyColor: 'bg-green-500/20 text-green-300', bio: "Exploring the world of cannabis with a focus on education, strain reviews, and responsible consumption. Learn and vibe with me.", subscriberCount: 26200, videoCount: 238, },
  { id: 3, name: 'Explore Detroit', handle: '@exploredetroit', avatarEmoji: 'üèôÔ∏è', bannerGradient: 'from-sky-500/20 to-indigo-500/20', specialty: 'City Vlogging', specialtyColor: 'bg-sky-500/20 text-sky-300', bio: "Showcasing the art, culture, and hidden gems of Detroit. Follow along for event coverage and local business spotlights.", subscriberCount: 9800, videoCount: 76, }
];

const tools = [
  {
    name: 'Midjourney',
    icon: '‚õµÔ∏è',
    description: 'The industry-leading platform for crafting breathtaking, high-resolution images from simple text prompts.',
    tags: ['Image', 'Art'],
    gradient: 'from-indigo-500/20 to-blue-500/20'
  },
  {
    name: 'OpenAI Sora',
    icon: 'üé¨',
    description: 'A revolutionary text-to-video model that generates cinematic, high-fidelity video clips from your imagination.',
    tags: ['Video', 'Cinematic'],
    gradient: 'from-teal-500/20 to-cyan-500/20'
  },
  {
    name: 'Suno',
    icon: 'üéµ',
    description: 'Create radio-quality music in any genre, complete with custom lyrics and vocals, in just a matter of seconds.',
    tags: ['Music', 'Audio'],
    gradient: 'from-orange-500/20 to-amber-500/20'
  },
  {
    name: 'ElevenLabs',
    icon: 'üé§',
    description: 'The premier toolkit for generating ultra-realistic text-to-speech and cloning voices for any project.',
    tags: ['Voice', 'Audio'],
    gradient: 'from-rose-500/20 to-pink-500/20'
  }
];

const recentVideos = Array(12).fill(null).map((_, i) => ({
  id: i + 4,
  title: [`Cannabis Strain Review: Blue Dream`, `How to Roll the Perfect Joint`, `Top 5 Detroit Coffee Shops`, `Food Truck Festival Highlights`, `Downtown Detroit Dispensary Tour`, `Cooking with Cannabis: Basics`, `Local Artist Spotlight`, `Morning Routine at Coffee House Detroit`, `Product Unboxing: New Vape Pen`, `Late Night Food Options in Detroit`, `DIY Cannabis Tinctures`, `Weekend Events Roundup`][i],
  business: [`Detroit Dabs`, `Detroit Dabs`, `Motor City Muncher`, `Motor City Muncher`, `Detroit Dabs`, `The Canna-seur`, `Explore Detroit`, `Motor City Muncher`, `The Canna-seur`, `Motor City Muncher`, `The Canna-seur`, `Explore Detroit`][i],
  duration: [`3:45`, `1:20`, `4:10`, `2:35`, `5:15`, `8:20`, `2:45`, `0:58`, `6:32`, `1:45`, `7:15`, `3:20`][i],
  date: new Date(2025, 5, 24 - i * 2).toISOString().split('T')[0],
  category: [`cannabis`, `cannabis`, `food`, `food`, `cannabis`, `cannabis`, `local`, `food`, `cannabis`, `food`, `cannabis`, `events`][i]
}));

creators.forEach(creator => {
  creator.latestVideos = recentVideos.filter(v => v.business === creator.name).slice(0, 2);
});

const categories = [ { id: "all", label: "All Videos" }, { id: "cannabis", label: "Cannabis" }, { id: "food", label: "Food & Drink" }, { id: "local", label: "Local Businesses" }, { id: "events", label: "Events" }];

const premiereVideo = {
  title: "Live from the Detroit Food Festival",
  creator: "Motor City Muncher",
  liveViewers: 8300,
  chatMessages: [
    { user: 'Foodie123', message: 'Those tacos look incredible! üåÆ' },
    { user: 'Detroiter', message: 'Best event of the summer!' },
    { user: 'DabMaster', message: 'Any medicated munchies there?' },
  ],
};

const videoShorts = [
  { id: 'short-1', title: 'Perfect Pizza Slice', creator: '@mcmuncher', icon: 'üçï', gradient: 'from-orange-500 to-red-500' },
  { id: 'short-2', title: 'Rolling Technique', creator: '@detroitdabs', icon: 'üåø', gradient: 'from-emerald-500 to-green-500' },
  { id: 'short-3', title: 'Coffee Art', creator: '@mcmuncher', icon: '‚òï', gradient: 'from-amber-500 to-yellow-500' },
  { id: 'short-4', title: 'Street Art Tour', creator: '@exploredetroit', icon: 'üé®', gradient: 'from-sky-500 to-indigo-500' },
  { id: 'short-5', title: 'Best Edibles?', creator: '@detroitdabs', icon: 'üç¨', gradient: 'from-lime-500 to-emerald-500' },
  { id: 'short-6', title: 'Concert Clip', creator: '@exploredetroit', icon: 'üé§', gradient: 'from-purple-500 to-pink-500' },
];

const styleHotspots = [
  { id: 'spot-1', title: 'Corktown Eats', creator: 'Motor City Muncher', coords: { top: '55%', left: '38%' } },
  { id: 'spot-2', title: 'Midtown Art Scene', creator: 'Explore Detroit', coords: { top: '40%', left: '50%' } },
  { id: 'spot-3', title: 'Eastern Market Haul', creator: 'Detroit Dabs', coords: { top: '45%', left: '65%' } },
  { id: 'spot-4', title: 'Riverfront Skate Park', creator: 'Explore Detroit', coords: { top: '70%', left: '55%' } },
];

const themedCollection = {
  title: "The Canna-seur's Guide to Edibles",
  description: "A curated collection of videos covering everything from cooking basics to advanced infusion techniques. Your journey to becoming a cannabis culinary expert starts here.",
  videos: [
    { id: 'th-1', title: 'Cooking with Cannabis: The Basics', duration: '8:20' },
    { id: 'th-2', title: 'DIY Tinctures & Oils', duration: '7:15' },
    { id: 'th-3', title: 'Gourmet Gummy Recipe', duration: '12:45' },
  ],
};

const today = new Date('2025-06-24T11:16:00');
function isNew(videoDateStr: string) {
  const videoDate = new Date(videoDateStr);
  const diffTime = today.getTime() - videoDate.getTime();
  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
  return diffDays <= 10 && diffDays >= 0;
}

const gradients = [ 'from-pink-500/20 to-purple-500/20', 'from-emerald-500/20 to-teal-500/20', 'from-sky-500/20 to-indigo-500/20'];
---

<Layout title="Videos | Creative Showcase" class="bg-gray-950">

  <!-- ======================================= -->
  <!-- 1. HERO: "Live Premiere" Section        -->
  <!-- ======================================= -->
  <section class="relative min-h-[70vh] md:min-h-[80vh] flex items-center justify-center text-white overflow-hidden p-4">
    <div class="absolute inset-0 bg-gradient-to-br from-purple-900 via-indigo-900 to-black animate-pulse z-0"></div>
    <div class="absolute inset-0 bg-black/50 z-10"></div>
    <div class="relative z-20 grid grid-cols-1 lg:grid-cols-3 gap-8 w-full max-w-7xl items-center">
      <div class="lg:col-span-2 text-center lg:text-left">
        <div class="inline-flex items-center gap-2 bg-red-600 px-3 py-1 rounded-full text-sm font-semibold mb-4">
          <div class="w-2 h-2 rounded-full bg-white animate-pulse"></div>
          LIVE
        </div>
        <h1 class="text-4xl md:text-6xl font-black text-white tracking-tight">{premiereVideo.title}</h1>
        <p class="mt-4 text-lg text-gray-300">A live event from <span class="font-bold text-pink-400">{premiereVideo.creator}</span></p>
        <div class="mt-6 flex items-center justify-center lg:justify-start gap-4 text-gray-300">
          <svg class="w-5 h-5 text-red-500" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"></path><path d="M12 17a5 5 0 100-10 5 5 0 000 10zm0-8a3 3 0 110 6 3 3 0 010-6z"></path></svg>
          <span>{premiereVideo.liveViewers.toLocaleString()} watching now</span>
        </div>
      </div>
      <div class="bg-gray-900/50 backdrop-blur-md border border-gray-700/50 rounded-xl p-4 h-96 flex flex-col">
        <h3 class="text-lg font-bold mb-2 text-center">Live Chat</h3>
        <div class="flex-grow space-y-3 overflow-y-auto pr-2">
          {premiereVideo.chatMessages.map(msg => (
            <div class="bg-gray-800/70 p-2 rounded-lg text-sm">
              <span class="font-bold text-pink-400/80 mr-2">{msg.user}:</span>
              <span class="text-gray-300">{msg.message}</span>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <main class="py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-16">

     <!-- ======================================= -->
     <!-- 5. All Videos & Filter Section          -->
     <!-- ======================================= -->
     <section>
       <div class="border-l-4 border-emerald-500 pl-6 mb-8">
           <h2 class="text-3xl font-bold text-white">All Videos</h2>
           <p class="text-gray-400">Browse the full collection of content from around the city.</p>
       </div>
       
       <!-- Filter Bar -->
       <div class="border-b border-gray-800 mb-12">
           <div class="flex overflow-x-auto scrollbar-hide">
             {categories.map((category) => (
               <button class={`flex-shrink-0 px-6 py-4 text-sm font-medium border-b-2 transition-colors duration-200 ${category.id === 'all' ? 'border-pink-500 text-pink-500' : 'border-transparent text-gray-400 hover:text-white hover:border-gray-500'}`}>
                 {category.label}
               </button>
             ))}
           </div>
       </div>
       
       <!-- Video Grid -->
       <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-8">
         {recentVideos.map((video, i) => (
           <a href="#" class="group">
             <div class="relative rounded-xl shadow-sm overflow-hidden border border-gray-800/50 group-hover:border-gray-700 transition">
               <div class={`aspect-[16/9] bg-gradient-to-br ${gradients[i % gradients.length]} flex items-center justify-center`}><div class="text-3xl">üé•</div></div>
               <div class="absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                 <div class="w-12 h-12 flex items-center justify-center rounded-full bg-white/20 backdrop-blur-sm border border-white/30"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white ml-1" viewBox="0 0 20 20" fill="currentColor"><path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" /></svg></div>
               </div>
               <div class="absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded-md">{video.duration}</div>
               {isNew(video.date) && (<div class="absolute top-2 left-2 bg-gradient-to-r from-pink-500 to-purple-600 text-white text-xs font-bold px-2 py-1 rounded-md animate-pulse">NEW</div>)}
             </div>
             <div class="pt-3">
               <p class="font-semibold text-white line-clamp-2">{video.title}</p>
               <p class="text-sm text-gray-400">{video.business}</p>
             </div>
           </a>
         ))}
       </div>
     </section>

      <!-- ======================================= -->
      <!-- 2. "Shorts & Reels" Carousel            -->
      <!-- ======================================= -->
      <section>
          <h2 class="text-3xl font-bold text-white mb-8">Shorts & Reels</h2>
          <div class="flex gap-4 md:gap-6 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-hide">
            {videoShorts.map(short => (
              <a href="#" class="group flex-none w-40 h-64 sm:w-48 sm:h-72 bg-gray-800 rounded-xl overflow-hidden cursor-pointer snap-start relative transition-all duration-300 hover:shadow-2xl hover:shadow-black/50 hover:scale-105">
                <div class={`absolute inset-0 bg-gradient-to-br ${short.gradient}`}></div>
                <div class="absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors"></div>
                <div class="relative h-full flex flex-col justify-between p-4 text-white">
                  <div class="text-right text-3xl opacity-50">{short.icon}</div>
                  <div>
                    <h3 class="font-bold">{short.title}</h3>
                    <p class="text-sm text-gray-300">{short.creator}</p>
                  </div>
                </div>
              </a>
            ))}
          </div>
      </section>

      <section>
        <div class="border-l-4 border-cyan-500 pl-6 mb-8">
          <h2 class="text-3xl font-bold text-white">Spotlight on the Tools</h2>
          <p class="text-gray-400">Discover the magic behind the masterpieces.</p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          {tools.map(tool => (
            <div class="bg-gray-900/50 rounded-xl p-6 border border-gray-800 hover:border-cyan-500/50 hover:-translate-y-1 transition-all duration-300 flex flex-col">
              <div class={`w-16 h-16 rounded-lg bg-gradient-to-br ${tool.gradient} flex items-center justify-center text-4xl mb-4`}>
                {tool.icon}
              </div>
              <h3 class="text-xl font-bold text-white">{tool.name}</h3>
              <div class="flex gap-2 mt-2">
                {tool.tags.map(tag => <span class="text-xs bg-cyan-500/10 text-cyan-300 px-2 py-1 rounded-full">{tag}</span>)}
              </div>
              <p class="text-gray-400 mt-4 text-sm flex-grow">{tool.description}</p>
              <a href="#" class="inline-block mt-6 text-sm font-semibold text-cyan-400 hover:text-cyan-300">View Creations &rarr;</a>
            </div>
          ))}
        </div>
      </section>
  
      <!-- ======================================= -->
      <!-- 7. Final Call to Action (CTA)           -->
      <!-- ======================================= -->
      <section class="py-16">
        <div class="max-w-4xl mx-auto text-center px-4">
          <h2 class="text-3xl font-bold text-white">Have Content to Share?</h2>
          <p class="mt-3 text-lg text-gray-400">
            Join our community of creators and share your own videos with the world.
          </p>
          <div class="mt-8">
            <a href="#" class="btn-primary">
              Upload Your Video
            </a>
          </div>
        </div>
      </section>

    </div>
  </main>
</Layout>

<style is:global>
  .text-gradient-pink { background-image: linear-gradient(to right, #ec4899, #a855f7); -webkit-background-clip: text; background-clip: text; color: transparent; }
  .scrollbar-hide::-webkit-scrollbar { display: none; }
  .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
  .line-clamp-1 { overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 1; }
  .line-clamp-2 { overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 2; }
  /* Custom background grid for the map section */
  .bg-grid-gray-800\/20 {
    background-image:
      linear-gradient(to right, rgba(55, 65, 81, 0.2) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(55, 65, 81, 0.2) 1px, transparent 1px);
    background-size: 3rem 3rem;
  }
</style>
